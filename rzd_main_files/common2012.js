$(function(){$(".j-link-pda").on("click",function(j){var i=location.hostname,h=i.split("."),k=h.length;if(k>=2){i=h[k-2]+"."+h[k-1]}window.setCookie("DontRedirectToMobileVersion","false","Thu, 01 Jan 1970 00:00:00 UTC",0,i);return j});var f=$(".j__spoiler-text");var c=$(".j__spoiler-toggle");if(f.length>0&&c.length>0){c.on("click",function(){$(this).toggleClass("active");$(this).next().toggle()})}TSP.init();Pion.init();PhotoReports.init();IM.init();var g=$(".livecharts_holder");if(g.length!==0){$.getScript("/js/ifr/live-charts.js").success(function(){window.LCH.initFront(g)}).error(function(){console.log("Ошибка получения или парсинга скрипта live-charts.js")})}var a=$("video").filter(function(){var i=$(this);var j=i.children("source").attr("src");var h=/^.*\.FLV$/im.test(j);if(h){i.data("source",j)}return h});if(a.length!==0){if(!d){a.replaceWith('<div class="warningBlock">Для проигрывания видео необходим <a href="https://get.adobe.com/ru/flashplayer/">Adobe Flash Player</a></div>')}else{$.getScript("/js/third-party/flowplayer/flowplayer.js",function(){for(var l=0,h=a.length;l<h;l++){var k=a.eq(l);var j=$('<a href="'+k.data("source")+'" style="display:block;width:'+k.attr("width")+"px;height:"+k.attr("height")+'px;"></a>');k.replaceWith(j);flowplayer(j[0],"/js/third-party/flowplayer/flowplayer.swf",{clip:{autoPlay:false,autoBuffering:false},play:{replayLabel:"Воспроизвести сначала"}})}})}}var b=window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident")!==-1;var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var d=Utils.getFlashVersion()[0]>=6;$(document.body).addClass("body_msie-"+b+" body_flash-"+d+" body_safari-"+e);$(".j-copy").on("click",function(){var h=$(this),k=$("<input/>").attr("type","textarea").appendTo("#copy_1"),j=h.data("id"),i;i=$("#"+j).text();k.val(i);k.focus();k[0].setSelectionRange(0,999999);document.execCommand("copy");k.remove()})});window.TSP={init:function(){TSP.$tables_sort=$(".TSP_hasSort");TSP.$tables_pagi=$(".TSP_hasPagi");TSP.$tables_all=TSP.$tables_sort.add(TSP.$tables_pagi);if(TSP.$tables_all.length===0){return}var a=["/js/third-party/jquery.tablesorter.min.js"];if(TSP.$tables_pagi.length!==0){a.push("/js/third-party/jquery.tablesorter.pager.min.js")}$.getScript_multiple({scriptUrlsArray:a,successCallback:TSP.go,cache:true})},go:function(){TSP.$tables_all.each(function(d,c){var n=$(this);var f=n.find("tr").filter(function(){return this.parentNode.tagName!=="TFOOT"}).eq(0);var k=n.children("thead");if(k.length===0){k=$('<thead class="TSP_theadCreatedOnTheFly"/>').prependTo(n).prepend(f)}else{if(k.children("tr").length!==1&&n.is(TSP.$tables_sort)===true){k.children("tr").not(f).prependTo(n)}}var e=f.html().replace(/<td/g,"<th").replace(/<\/td/g,"</th");f.html(e);var a={};var l=k.find("th, td");for(var g=0,j=l.length;g<j;g++){var h=l.eq(g).hasClass("TSP_sortCol");a[g]={sorter:h}}n.tablesorter({dateFormat:"ddmmyyyy",widthFixed:true,cssHeader:"TSP_header",cssDesc:"TSP_header-desc",cssAsc:"TSP_header-asc",headers:a});if(n.is(TSP.$tables_pagi)){var b=n.data("tsp_pagiqty")|0;if(b===0){b=10}var m=b===10||b===25||b===50||b===100?"":'<option value="'+b+'">'+b+"</option>";n.after('<div class="TSP_pager TSP_pager-'+d+'"><form><img src="/images/back_listing.png" class="TSP_btn TSP_first"><img src="/images/backone_listing.png" class="TSP_btn TSP_prev"><input readonly class="TSP_pageInp" size="5"><img src="/images/forwardone_listing.png" class="TSP_btn TSP_next"><img src="/images/forward_listing.png" class="TSP_btn TSP_last"> показывать по: <select class="TSP_pageSel">'+m+'<option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="9999">-- все --</option></select> перейти на страницу: <select class="TSP_goto" title="Выберите страницу"></select></form></div>');n.tablesorterPager({container:$(".TSP_pager-"+d),fixedHeight:true,output:"{page}/{totalPages}",cssGoto:".TSP_goto",cssNext:".TSP_next",cssPrev:".TSP_prev",cssFirst:".TSP_first",cssLast:".TSP_last",cssPageDisplay:".TSP_pageInp",cssPageSize:".TSP_pageSel",size:b})}})}};window.IM={init:function(){this.$holderz=$(".imaps_holder");if(this.$holderz.length!==0){$.getScript("/js/ifr/imaps.js")}}};window.Pion={init:function(){Pion.$holderz=$(".pion_holder");if(Pion.$holderz.length!==0){Pion.getScripts()}},construct:function(b){var a=this;a.cont=b;a.panelsWrap=a.cont.find(".sliderkit-panels");a.panelz=a.panelsWrap.find(".sliderkit-panel");a.nav=a.cont.find(".sliderkit-nav");a.setDimensions=function(){var e=-1;var c=-1;a.panelz.each(function(){var k=$(this);var i=k.find(".pion_pict");var j=k.find(".pion_descr");var f=i.outerWidth();j.css("width",f);var g=i.outerHeight()+j.outerHeight();e=f>e?f:e;c=g>c?g:c});var d={H:c,W:e};a.panelsWrap.css({height:d.H,width:d.W});a.panelz.css("width",d.W);a.cont.css("width",d.W)};a.bindTrigger=function(){a.cont.find(".sliderkit-navTrigger").on("click",function(c){a.navToggle()})};a.navToggle=function(){a.nav.toggle()};a.init=function(){a.setDimensions();a.cont.sliderkit(a.skparams);a.bindTrigger();a.cont.addClass("sliderkit-loaded")};a.skparams={auto:false,autospeed:(a.panelsWrap.data("custom_speed")||5)*1000,tabs:1,circular:1,panelfx:"sliding",panelfxeasing:"easeInOutExpo",panelfxafter:function(){var c=a.cont.data("sliderkit");if(!!c&&c.currId===0){c.autoScrollStop();c.playBtnPause()}}}},start:function(b){var c=c||[];var a=b?b:$;$(a.find(".sliderkit")).each(function(d){c.push(new Pion.construct($(this)));c[d].init()})},getScripts:function(){var b=["/js/third-party/jquery.easing.1.3.min.js","/js/third-party/jquery.sliderkit.1.9.2.pack.js","/js/third-party/jquery.waitforimages.min.js"];var c=0;for(var a=0;a<b.length;a++){$.get(b[a],function(e){window["eval"](e);d()})}var d=function(){c++;if(c===b.length){Pion.getMarkup()}}},getMarkup:function(){var b="";var a=location.protocol+"//"+location.host+location.pathname+"?layer_name=Pion_card";Pion.$holderz.each(function(d){var c=Pion.$holderz.eq(d);$.get(a+"&id="+Pion.$holderz.eq(d).data("pion_id"),function(f){$data=$(f);var e=$data.filter(".sliderkit").filter("[data-pion_id="+c.data("pion_id")+"]");c.append(e).addClass("pion_holder-loaded").waitForImages(function(){Pion.start($(this))})})})}};window.PhotoReports={init:function(){PhotoReports.$holderz=$(".photoreports_holder");PhotoReports.$news_holderz=$(".photoreports_galleryBlockCommon");if(PhotoReports.$holderz.length!==0||PhotoReports.$news_holderz.length!==0){var a=["/rzd_css/modules/photoreports.css","/rzd_css/jquery.fancybox-1.3.2.css"];if(document.createStyleSheet){document.createStyleSheet(a[0]);document.createStyleSheet(a[1])}else{$("head").append('<link href="'+a[0]+'" rel="stylesheet" type="text/css" /><link href="'+a[1]+'" rel="stylesheet" type="text/css" media="screen"/>')}PhotoReports.getScripts()}},start:function(){$(document).ready(function(){$(".photoreports_galleryBlockCommon").show();$("a.photoreports_news_Gallery").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"outside",titleFormat:function(d,c,a,b){return'<span id="fancybox-title-over" style="color: #fff; text-align: center;">Фото '+(a+1)+" / "+c.length+(d.length?" &#160; "+d:"")+"</span>"}})});$(".photoreports_mycarousel").jcarousel();$(".photoreports_mycarousel li").click(function(){var a=parseInt($(this).attr("jcarouselindex"));if(a){pos=-(a-1)*380;$(this).closest("div.photoreports_galleryBlock").find("ul.photoreports_galleryMedium").css("left",pos)}return false})},getScripts:function(){$.when($.getScript("/js/third-party/jquery.jcarousel.min.js"),$.getScript("/js/third-party/jquery.fancybox-1.3.2.js"),$.getScript("/js/third-party/jquery.waitforimages.min.js"),$.Deferred(function(a){$(a.resolve)})).done(function(){if(PhotoReports.$holderz.length!==0){PhotoReports.getMarkup()}else{PhotoReports.start()}})},getMarkup:function(){var a="";var b=location.protocol+"//"+location.host+location.pathname+"?layer_name=PhotoReports_card";PhotoReports.$holderz.each(function(d){var c=$(this);$.get(b+"&id="+c.data("photoreports_id"),function(e){c.append(e);PhotoReports.gotMarkupCnt++;if(PhotoReports.gotMarkupCnt===PhotoReports.$holderz.length){PhotoReports.start()}})})},gotMarkupCnt:0};jQuery.getScript_withCache=function(b,a){a=$.extend(a||{},{dataType:"script",cache:true,url:b});return jQuery.ajax(a)};jQuery.getScript_multiple=function(b){var j=b.cache||false;var c=0;var d=false;for(var f=0,g=b.scriptUrlsArray.length;f<g;f++){var a=b.scriptUrlsArray[f];(function(i){$.ajax({url:i,dataType:"script",success:function(){e(i,false,arguments)},error:function(){e(i,false,arguments)},cache:j})})(a);h("   Иницирована загрузка "+a+(j===true?"":" (с принудительным сбросом кеша)"))}function e(l,k,i){if(k===true){d=true;h("   Ошибка загрузки ресурса "+l+". Детали: ");h(i)}else{h("   Успешно загружен скрипт: "+l)}if(++c===b.scriptUrlsArray.length){if(d===false){if(typeof b.successCallback==="function"){b.successCallback()}}else{if(typeof b.errorCallback==="function"){b.errorCallback()}h("Произошла ошибка загрузки ресурсов. Пожалуйста, попробуйте перезагрузить страницу.")}}}function h(i){if(b.debug===true){Utils.safeLog(i)}}};$.fn.clearForm=function(a){return this.each(function(){$("input,select,textarea",this).clearFields(a)})};$.fn.clearFields=$.fn.clearInputs=function(a){var b=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(b.test(d)||c=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false}else{if(c=="select"){this.selectedIndex=0}else{if(d=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true))}else{$(this).val("")}}else{if(a){if((a===true&&/hidden/.test(d))||(typeof a=="string"&&$(this).is(a))){this.value=""}}}}}}})};$.fn.serializeObject=function(){var c={};var b=this.serializeArray();$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c};$.fn.jqui_tooltip=function(a){return $(this).each(function(){var h=$(this);var f=h.attr("title");if(typeof f==="undefined"||f===false){h.attr("title","")}var e=h.data("tooltip-key");var c=h.data("tooltip-selector");var b="";if(!!window.Tooltips&&!!window.Tooltips[e]){b=window.Tooltips[e]}else{if(!!c){b=$(c).html()}else{b=this.title}}b=$.trim(b);if(b==="null"){h.attr("title","");return true}var g={show:false,hide:false,content:b};var d=!!a?$.extend(g,a):g;h.tooltip(d)})};$.fn.filterData=function(a,b){return this.filter(function(){return $(this).data(a)==b})};function checkDatePeriod(e,d){var h=document.getElementById(e).value;var c=document.getElementById(d).value;if(h!==""){var b=checkDateFormat(h);if(!b){alert("Неправильный формат даты");document.getElementById(e).focus();return false}}if(c!==""){var g=checkDateFormat(c);if(!g){alert("Неправильный формат даты");document.getElementById(d).focus();return false}}if(b&&g){var a=1000*60*60*24;var f=Math.ceil((g.getTime()-b.getTime())/(a));if(f<0){alert("Дата начала периода должна быть меньше даты окончания");return false}}return true}function checkDateFormat(c){var b=/^(\d{2})[/\//\.\-]{1}(\d{2})[/\//\.\-]{1}(\d{4})$/;if(b.test(c)){var a=b.exec(c);if(a[1]&&a[1]!==false&&a[1]!=="undefined"){day=a[1]}if(a[2]&&a[2]!==false&&a[2]!=="undefined"){month=a[2]}if(a[3]&&a[3]!==false&&a[3]!=="undefined"){year=a[3]}var d=new Date(year,month-1,day)}else{return false}return d}var Utils={validateEmail:function(b){var a=new RegExp("^([0-9a-zA-Z_]([-+.\\w]*[0-9a-zA-Z_-])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$");return a.test(b)},safeLog:function(a){if(typeof window.console==="object"&&typeof window.console.log==="function"){window.console.log(a)}},getFlashVersion:function(){var g,h=navigator,a,b="Shockwave Flash";if((a=h.mimeTypes)&&(a=a["application/x-shockwave-flash"])&&a.enabledPlugin&&(h=h.plugins)&&h[b]){g=h[b].description}else{if(window.ActiveXObject){try{g=(new ActiveXObject((b+"."+b).replace(/ /g,""))).GetVariable("$version")}catch(c){}}}return g?g.replace(/\D+/,"").split(/\D+/):[0,0]}};function showPopup(){$("#header").append($("#popup"));$("#popup").show(10)}function closePopup(){$("#popup").toggleClass("hidden").removeAttr("style")}function toggleSearchFormDiv(b,a){var c=$("#"+a);if($(c).is(":hidden")){$(c).fadeIn("fast",function(){$(b).text("Скрыть форму поиска");$(b).css("top","25px")})}else{$(c).fadeOut("fast",function(){$(b).text("Поиск");$(b).css("top","0")})}}function clearRubric(){document.getElementById("rubricsField").value="";document.getElementById("selectedRubricsName").innerHTML="";document.getElementById("selectedRubricsName").style.display="none";document.getElementById("refreshLink").style.display="none";return false}function chooseRubric(f,a,d){var b=window.opener.document.getElementById(d);var c=window.opener.document.getElementById("selectedRubricsName");var e=window.opener.document.getElementById("refreshLink");if(b.rubrics){b.rubrics.value=f}else{b.cat.value=f}c.innerHTML=a;c.style.display="block";e.style.display="inline";self.close();return false}function chooseFieldFromPopup(h,a,e,c){var b=window.opener.document.getElementById(e);var d=window.opener.document.getElementById("selectedRubricsName");var f=window.opener.document.getElementById("refreshLink");var g=window.opener.document.getElementById(c);g.value=h;d.innerHTML=a;d.style.display="block";f.style.display="inline";self.close();return false}function clearForm(c){var a=document.forms[c];for(var b=0;b<a.elements.length;b++){if(a.elements[b].type=="text"){a.elements[b].value=""}if(a.elements[b].type=="select-one"){a.elements[b].value=""}if(a.elements[b].type=="checkbox"){a.elements[b].checked=false}if(a.elements[b].type=="radio"){a.elements[b].value="0";a.elements[b].checked=false}}}function changeContentHint(f,d,b,g){$(".popup_hint").hide();var c=$("#"+d);if(c!==null){var a=$(f).offset();var e=$(f).outerHeight();$("#"+d).css("top",a.top+e+11);$("#"+d).css("left",a.left+b);$("#"+d).find(".inner").html(g);$("#"+d).show()}}function hideContentHint(){$(".popup_hint").each(function(){$(this).find(".inner").html("");$(this).hide()})}function checkFieldVal(b,a,d){var c=document.getElementById(b).value;if(a.test(c)){return true}else{alert(d);return false}}function computationHeightDiv(c,b,a,f){var e=$("#"+c).height()+f;var d=$("#"+b).height()+f;if(e>d){$("."+a).css("height",e)}else{$("."+a).css("height",d)}};